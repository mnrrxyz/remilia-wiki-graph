# Data Directory

This directory contains the graph data extracted from the Remilia wiki.

## ğŸ“Š Files

- `remilia_graph_final.json` - Main graph data (nodes and edges)
- `missing_pages_analysis.json` - Analysis of referenced but non-existent pages

## ğŸ“ Data Format

### remilia_graph_final.json

```json
{
  "metadata": {
    "total_nodes": 177,
    "total_edges": 1244,
    "timestamp": "2026-01-01 19:19:24"
  },
  "graph": {
    "Page Name": [
      "Connected Page 1",
      "Connected Page 2"
    ]
  }
}
```

**Structure:**
- `metadata`: Stats about the graph
- `graph`: Object where keys are page names, values are arrays of connected pages

### missing_pages_analysis.json

```json
{
  "Missing Page Name": 5,  // Number of times this page is referenced
  "Another Missing Page": 3
}
```

**Purpose:** Track which pages are most frequently referenced but don't exist yet.

## ğŸ”„ Updating Data

### Manual Update (Current)

1. Run the crawler script:
   ```bash
   cd scripts/
   python wiki_crawler.py
   ```

2. Copy generated files to `data/`:
   ```bash
   cp remilia_graph_final.json ../data/
   cp missing_pages_analysis.json ../data/
   ```

3. Commit and push:
   ```bash
   git add data/
   git commit -m "Update graph data"
   git push
   ```

4. Vercel auto-deploys the new data

### Automated Update (Future - Phase 6)

GitHub Actions will:
- Run crawler daily at midnight UTC
- Detect changes in wiki
- Auto-commit new JSON files
- Trigger Vercel deployment

## ğŸ“ Data Processing

The raw JSON is processed by `src/utils/graphProcessor.ts` into:

```typescript
{
  nodes: [
    {
      id: "Milady Maker",
      label: "Milady Maker",
      outgoing: 15,
      incoming: 42,
      isMissing: false,
      size: 35 // calculated based on connections
    }
  ],
  edges: [
    {
      source: "Milady Maker",
      target: "Charlotte Fang"
    }
  ]
}
```

## ğŸ” Data Quality

**Current stats:**
- **177** existing pages
- **1,244** connections
- **347** missing/referenced pages
- Average **7 connections** per page

**Top connected pages:**
- Charlotte Fang (most referenced)
- Milady Maker
- Remilia Corporation
- Network Spirituality

## ğŸš¨ Important Notes

- **Never commit sensitive data** (this is all public wiki data, so OK)
- **JSON files should be minified** in production (Vite handles this)
- **Always validate JSON** before committing (scripts do this automatically)

## ğŸ“Š Future Enhancements

### Phase 5: Community Detection
Add `community` field to each node:

```json
{
  "id": "Milady Maker",
  "community": "art",
  "community_id": 1
}
```

Generated by Louvain algorithm, stored in JSON for fast loading.
